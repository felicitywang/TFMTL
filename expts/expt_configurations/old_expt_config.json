{
    "venv": "inference",
    "root": "/home/sebner/tfmtl/expts/scripts/",
    "module": "discriminative_driver",
    "jobs_dir": "/export/a11/sebner/tfmtl_results/jobs/<expt_setup>",
    "results_dir": "/export/a11/sebner/tfmtl_results/results/<expt_setup>",

    "email": "seth@cs.jhu.edu",
    "username": "sebner",

    "total_slots": 100,
    "slots_per_job": 2,
    "mem_ram": 2,

    "num_intra_threads": 1,
    "num_inter_threads": 1,

    "expt_setup": [{"expt_setup_name": "MultiNLI_mult",
                    "datasets": "MultiNLI Topic5",
                    "dataset_paths": "path-to-multinli path-to-topic5",
                    "class_sizes": "3 5",
                    "vocab_size_file": "path-to-vocab-size-file",
                    "alphas": "0.5 0.5",
                    "topics_paths": "path-to-topics-multinli path-to-topics-topic5",
                    "MultiNLI": [{"embed_fn": "embed_sequence",
                                      "embed_kwargs": [{"embed_dim": [100, 200]}],
                                      "extract_fn": "serial_lbirnn",
                                      "extract_kwargs": [{"num_layers": [1, 2],
                                                         "cell_type": ["tf.contrib.rnn.LSTMCell",
                                                                       "tf.contrib.rnn.GRUCell"],
                                                         "cell_size": [50, 100, 200, 300],
                                                         "initial_state_fwd": null,
                                                         "initial_state_bwd": null}]
                                     },
                                     
                                     {"embed_fn": "embed_sequence",
                                      "embed_kwargs": [{"embed_dim": [100, 200]}],
                                      "extract_fn": "paragram",
                                      "extract_kwargs": [{"reducer": ["reduce_min_over_time",
                                                                     "reduce_max_over_time",
                                                                     "reduce_avg_over_time",
                                                                     "reduce_var_over_time",
                                                                     "reduce_over_time"],
                                                         "apply_activation": [true, false],
                                                         "activation_fn": "tf.nn.relu"}]
                                     },
                                     
                                     {"embed_fn": "embed_sequence",
                                      "embed_kwargs": [{"embed_dim": [100, 200]}],
                                      "extract_fn": "conv_and_pool",
                                      "extract_kwargs": [{"num_filter": [32, 64, 128],
                                                         "max_width": [5, 7],
                                                         "activation": "tf.nn.relu",
                                                         "reducer": ["reduce_min_over_time",
                                                                     "reduce_max_over_time",
                                                                     "reduce_avg_over_time",
                                                                     "reduce_var_over_time",
                                                                     "reduce_over_time"]}]
                                     }],
                    "Topic5": [{"embed_fn": "embed_sequence",
                                      "embed_kwargs": [{"embed_dim": [100, 200]}],
                                      "extract_fn": "serial_lbirnn",
                                      "extract_kwargs": [{"num_layers": [1, 2],
                                                         "cell_type": ["tf.contrib.rnn.LSTMCell",
                                                                       "tf.contrib.rnn.GRUCell"],
                                                         "cell_size": [50, 100, 200, 300],
                                                         "initial_state_fwd": null,
                                                         "initial_state_bwd": null}]
                                     },
                                     
                                     {"embed_fn": "embed_sequence",
                                      "embed_kwargs": [{"embed_dim": [100, 200]}],
                                      "extract_fn": "paragram",
                                      "extract_kwargs": [{"reducer": ["reduce_min_over_time",
                                                                     "reduce_max_over_time",
                                                                     "reduce_avg_over_time",
                                                                     "reduce_var_over_time",
                                                                     "reduce_over_time"],
                                                         "apply_activation": [true, false],
                                                         "activation_fn": "tf.nn.relu"}]
                                     },
                                     
                                     {"embed_fn": "embed_sequence",
                                      "embed_kwargs": [{"embed_dim": [100, 200]}],
                                      "extract_fn": "conv_and_pool",
                                      "extract_kwargs": [{"num_filter": [32, 64, 128],
                                                         "max_width": [5, 7],
                                                         "activation": "tf.nn.relu",
                                                         "reducer": ["reduce_min_over_time",
                                                                     "reduce_max_over_time",
                                                                     "reduce_avg_over_time",
                                                                     "reduce_var_over_time",
                                                                     "reduce_over_time"]}]
                                     }]
                   },

                   {"expt_setup_name": "MultiNLI_single",
                    "datasets": "MultiNLI",
                    "dataset_paths": "path-to-multinli path-to-topic5",
                    "class_sizes": "3",
                    "vocab_size_file": "path-to-vocab-size-file",
                    "alphas": "1",
                    "topics_paths": "path-to-topics-multinli path-to-topics-topic5",
                    "MultiNLI": [{"embed_fn": "embed_sequence",
                                      "embed_kwargs": [{"embed_dim": [100, 200]}],
                                      "extract_fn": "serial_lbirnn",
                                      "extract_kwargs": [{"num_layers": [1, 2],
                                                         "cell_type": ["tf.contrib.rnn.LSTMCell",
                                                                       "tf.contrib.rnn.GRUCell"],
                                                         "cell_size": [50, 100, 200, 300],
                                                         "initial_state_fwd": null,
                                                         "initial_state_bwd": null}]
                                     },
                                     
                                     {"embed_fn": "embed_sequence",
                                      "embed_kwargs": [{"embed_dim": [100, 200]}],
                                      "extract_fn": "paragram",
                                      "extract_kwargs": [{"reducer": ["reduce_min_over_time",
                                                                     "reduce_max_over_time",
                                                                     "reduce_avg_over_time",
                                                                     "reduce_var_over_time",
                                                                     "reduce_over_time"],
                                                         "apply_activation": [true, false],
                                                         "activation_fn": "tf.nn.relu"}]
                                     },
                                     
                                     {"embed_fn": "embed_sequence",
                                      "embed_kwargs": [{"embed_dim": [100, 200]}],
                                      "extract_fn": "conv_and_pool",
                                      "extract_kwargs": [{"num_filter": [32, 64, 128],
                                                         "max_width": [5, 7],
                                                         "activation": "tf.nn.relu",
                                                         "reducer": ["reduce_min_over_time",
                                                                     "reduce_max_over_time",
                                                                     "reduce_avg_over_time",
                                                                     "reduce_var_over_time",
                                                                     "reduce_over_time"]}]
                                     }]
                   }],


    "model": "mult",
    "mode": "train",
    "num_train_epochs": 50,
    "checkpoint_dir": "/home/sebner/tfmtl/results/<expt_setup_name>/<name>/ckpt",
    "log_file": "/home/sebner/tfmtl/results/<expt_setup_name>/<name>/<mode>_results.log",
    "experiment_name": "RUDER_NAACL_18",
    "encoder_config_file": "/home/sebner/tfmtl/results/<expt_setup_name>/<name>/encoders.json",
    "encoder_tying": [{"embedders_tied": [true, false],
                       "extractors_tied": [true, false]
                      }],
    "architecture": "arch",
    "shared_mlp_layers": [0, 1],
    "shared_hidden_dims": [16, 64, 256],
    "private_mlp_layers": 1,
    "private_hidden_dims": [1, 8, 16, 64],
    "optimizer": [{"optimizer": "rmsprop",
                   "lr0": [0.0005, 0.001, 0.005]},
                  {"optimizer": "adam",
                   "lr0": [0.00005, 0.0001, 0.0005]}],

    "tuning_metric": "Acc",
    "seed": [42, 142]

}
